<!DOCTYPE html><html><head><title>mpc4s: Configuration</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="eikek" /><meta name="description" content="Scala- and Web-Client for MPD" /><meta name="og:image" content="/mpc4s/img/poster.png" /><meta name="image" property="og:image" content="/mpc4s/img/poster.png" /><meta name="og:title" content="mpc4s: Configuration" /><meta name="title" property="og:title" content="mpc4s: Configuration" /><meta name="og:site_name" content="mpc4s" /><meta name="og:url" content="https://github.com/eikek/mpc4s" /><meta name="og:type" content="website" /><meta name="og:description" content="Scala- and Web-Client for MPD" /><link rel="icon" type="image/png" href="/mpc4s/img/favicon.png" /><meta name="twitter:title" content="mpc4s: Configuration" /><meta name="twitter:image" content="/mpc4s/img/poster.png" /><meta name="twitter:description" content="Scala- and Web-Client for MPD" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="96x96" href="/mpc4s/img/favicon.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/mpc4s/highlight/styles/vs.css" /><link rel="stylesheet" href="/mpc4s/css/light-style.css" /><link rel="stylesheet" href="/mpc4s/css/mpc4s.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/mpc4s/" class="brand"><div class="brand-wrapper"></div><span>mpc4s</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/mpc4s/index.html" title="Home" class="">Home</a></div> <div class="sidebar-nav-item  "><a href="/mpc4s/protocol.html" title="Protocol" class="">Protocol</a></div> <div class="sidebar-nav-item  "><a href="/mpc4s/client.html" title="Client" class="">Client</a></div> <div class="sidebar-nav-item  open"><a href="/mpc4s/http.html" title="Http" class="drop-nested">Http</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/mpc4s/http/configuration.html" title="Configuration" class="active">Configuration</a> <a href="/mpc4s/http/install.html" title="Install" class="">Install</a> <a href="/mpc4s/http/endpoints.html" title="Endpoints" class="">Endpoints</a></div></div> <div class="sidebar-nav-item  "><a href="/mpc4s/player.html" title="Player" class="">Player</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/eikek/mpc4s" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/eikek/mpc4s" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="eikek" data-github-repo="mpc4s"><div class="content-wrapper"><section><h1 id="configuration">Configuration</h1>

<p>A configuration can be given as argument to the application or via a
system property <code class="highlighter-rouge">config.file</code>. Please see the
<a href="https://github.com/typesafehub/config/blob/master/HOCON.md">Spec</a> for
the config file format.</p>

<p>It is recommended to copy the <code class="highlighter-rouge">reference.conf</code> file (which is shown
below) and comment everything and then uncomment and change things you
want to be different.</p>

<p>The packaged application already contains this file. All settings not
specified in the configuration file falls back to the appropriate
setting in <code class="highlighter-rouge">reference.conf</code>.</p>

<h2 id="referenceconf">Reference.conf</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mpc4s {
  http {
    # The application name, used in loggin and information responses
    app-name = "mpc4s-http"

    # The base url; used to create links
    baseurl = "http://localhost:9600"

    # Host and port to bind the http service to
    bind {
      host = "127.0.0.1"
      port = 9600
    }

    ## The music directory; it should be the same as configured with
    ## mpd. For multiple mpd connections, this acts as a default and
    ## is used if no specific music directory is specified for some
    ## mpd connection.
    ##
    ## This is a required setting.
    #music-directory = "/var/lib/mpd/music"

    # The connection to MPD. Multiple mpd connections can be
    # specified. If they don't share the same music directory, you
    # need to configure it per mpd connection.
    #
    # There *must* be at least one config with id "default". Other ids
    # should be short names without weird chars or spaces, because
    # they will be part of the endpoint url.
    mpd.configs {
      default = {
        host = "127.0.0.1"
        port = 6600
        password = ""

        # The `max_connections` setting from your mpd server. The http
        # server should not exceed this limit.
        max-connections = 5

        # Timeout for mpd commands
        timeout = 5 seconds

        # A human readable title, like “Living Room”.
        title = "Default"

        ## A music directory for this specific mpd. If left out, the
        ## global configured music directory is used.
        #music-directory = ""
      }
    }

    # Configures how a file per album (booklet or cover) is searched.
    album-file {
      disc-directories = [ "cd", "disc", "CD", "Cd", "Disc", "DISC" ]
      disc-separators = [ "", ".", "-", "_", " " ]
      disc-numbers = [
        "01", "02", "03", "04", "05", "06", "07", "08", "09",
        "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15",
        "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X"
      ]

      # Paths to files are cached in memory to avoid requests to
      # mpd. This specifies the maximum cache size. A value &lt;= 0
      # disables the cache.
      cache-size = 3000
    }

    # Possible file names for covers.
    cover {
      basenames = [ "cover", "artwork", "Cover", "Artwork" ]
      extensions = [ "jpg", "jpeg", "png", "gif" ]
    }

    # Posslible filenames for booklets.
    booklet {
      basenames = [ "booklet", "artwork" ]
      extensions = [ "pdf" ]
    }

    # Covers can be resized before transmitting.
    #
    # It usually doesn't make much sense to transmit high quality
    # cover art to your small-screen android device. So they can be
    # resized to save bandwidth and make rendering the library page
    # faster.
    cover-thumbnails {
      # Whether to enable this feature.
      enable = true

      # The reason for resizing is to save bandwidth. If the file is
      # small enough the cost of resizing is not necessary.
      min-file-size = "70K"

      # Too large files may result in out-of-memory errors. For
      # resizing the files must be read completely in memory. Files
      # greater that this size are skipped.
      max-file-size = "70M"

      # The directory that is used to save resized images. The
      # directory must exist and the process must be able to write
      # into it. There should be enough space to hold all thumbnails
      # of all your cover art (around 5M for 100 files at
      # 500x500px). Note that this directory is not cleaned up
      # automatically.
      directory = "thumbnails"

      # Since processing images requires some resources (memory+cpu)
      # it might be necessary to restrict the number of parallel
      # invocations. Note, that this only applies to the first time a
      # thumbnail is requested. Subsequent requests simply return the
      # peviously generated file.
      max-parallel = 5
    }

    # Allows to specifiy a directory that the http server can serve
    # files from. Everything below that directory is served!
    custom-content {
      enabled = false
      directory = "some-directory"
    }
  }
}
</code></pre></div></div>

<h2 id="noteworthy-settings">Noteworthy settings</h2>

<p>There is a required setting (the app won’t start without):</p>

<ul>
  <li><code class="highlighter-rouge">mpc4s.http.music-directory</code>: The music directory used by MPD. This
is used to serve cover files from.</li>
</ul>

<p>Other important ones include:</p>

<ul>
  <li><code class="highlighter-rouge">mpc4s.http.baseurl</code>: The base url to the application. This is used
to construct urls.</li>
  <li><code class="highlighter-rouge">mpc4s.http.bind.{host|port}</code>: The host and port to bind the http
server to.</li>
  <li><code class="highlighter-rouge">mpc4s.http.mpd.default.{host|port}</code>: Connection info to MPD.</li>
  <li><code class="highlighter-rouge">mpc4s.http.mpd.default.max-connections</code>: The maximum allowed connections to
MPD. This must be lower than the corresponding value in <code class="highlighter-rouge">mpd.conf</code>.</li>
</ul>

<p>Regarding <code class="highlighter-rouge">max-connections</code> setting: MPD has the same setting that
specifies how many concurrent connections are allowed. This value
should always be lower than the one in your MPD config file! It can be
quite low. But: When the covers are initially loaded, one mpd request
is issued for each cover. So there are many multiple concurrent
requests. A high <code class="highlighter-rouge">max-connections</code> value here will speed up loading
covers initially. However, after first load, the paths to the cover
files are cached (the images are also cached in the browser) and
subsequent requests won’t ask mpd again.</p>
</section></div></div></div></div><script src="/mpc4s/highlight/highlight.pack.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/mpc4s/js/docs.js"></script></body></html>